#!/bin/bash
# If you prefer a zsh keybinding check:
# https://github.com/gessen/zsh-fzf-kill/blob/master/fzf-kill.plugin.zsh

FZF_DEFAULT_OPTS="--min-height=100 --prompt 'pkill -9 '"
if [[ "${UID}" != "0" ]]; then
  pid=$(ps -f -u ${UID} | awk '{for(i=8;i<=NF;i++)printf "%s ", $i; print""}' | sed 1d | sort | uniq  | fzf -m)
else
  pid=$(ps -ef | awk '{for(i=8;i<=NF;i++)printf "%s ", $i; print""}' | sed 1d | sort | uniq | fzf -m)
fi

if [[ "x$pid" != "x" ]]; then
  echo $pid | xargs pkill "-${1:-9}"
fi
